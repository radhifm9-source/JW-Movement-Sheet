<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Arrival / Departure Movement Sheet</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#eef6ff,#ffffff);
  margin:0;
  padding:16px;
  color:#1f2933;
  box-sizing:border-box;
}

/* Header with logo + title */
.header{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:8px;
  margin-bottom:16px;
  text-align:center;
}
.header-logo{
  height:48px;
  width:auto;
  object-fit:contain;
}
.header-title{
  font-size:20px;
  font-weight:bold;
  color:#003b5c;
  margin:0;
}

/* Card layout */
.card{
  background:#ffffff;
  padding:14px 16px;
  border-radius:10px;
  margin-bottom:16px;
  box-shadow:0 4px 10px rgba(0,0,0,0.04);
  border:1px solid #e5e7eb;           /* subtle border */
  border-left:5px solid #003b5c;      /* accent */
}
.card + .card{
  margin-top:12px;
}
h3{
  margin:0 0 8px 0;
  color:#003b5c;
  font-size:16px;
}
label{
  font-weight:bold;
  display:block;
  margin-top:10px;
  font-size:13px;
}
input, select, textarea{
  width:100%;
  padding:8px 9px;
  margin-top:4px;
  border-radius:6px;
  border:1px solid #cbd5e1;
  font-size:14px;
  box-sizing:border-box;
}

/* Numeric counts grid */
.count-grid{
  display:grid;
  grid-template-columns:repeat(4, minmax(0, 1fr));
  gap:10px;
}
.count-input{
  width:70px;
  text-align:center;
}
.count-wrapper{
  display:flex;
  flex-direction:column;
}

/* WhatsApp preview */
.preview{
  background:#0f172a;
  color:#22c55e;
  padding:12px;
  border-radius:8px;
  font-family:monospace;
  font-size:13px;
  white-space:pre-line;
  min-height:60px;
}

/* Buttons */
.whatsapp-btns{
  display:flex;
  gap:10px;
  margin-top:15px;
}
button{
  flex:1;
  padding:10px;
  border:none;
  border-radius:6px;
  background:#003b5c;
  color:white;
  font-size:14px;
  cursor:pointer;
}
button:active{
  opacity:0.8;
}

/* Mobile spacing & layout improvements */
@media (max-width:600px){
  body{
    padding:12px;
  }
  .card{
    padding:12px 12px;
    border-radius:8px;
  }
  .count-grid{
    grid-template-columns:repeat(2, minmax(0, 1fr));
  }
  .header-title{
    font-size:18px;
  }
}
</style>
</head>

<body>

<!-- Header with logo + title -->
<div class="header">
  <!-- Replace src with your actual logo path or URL -->
  <img src="logo.png" alt="JW Marriott Maldives Resort & Spa" class="header-logo">
  <h1 class="header-title">Arrival / Departure Movement Sheet</h1>
</div>

<!-- DATE & OFFICER -->
<div class="card">
  <label>Date</label>
  <input type="date" id="date" oninput="updatePreview()" onchange="updatePreview()">

  <label>Security Officer</label>
  <input type="text" id="officer" placeholder="e.g., Dhan"
         oninput="updatePreview()" onchange="updatePreview()">

  <label>Jetty</label>
  <select id="jetty" onchange="updatePreview()">
    <option>Arrival Jetty</option>
    <option>Supply Jetty</option>
    <option>Hashi Shio Jetty</option>
  </select>
</div>

<!-- ARRIVAL MOVEMENT -->
<div class="card">
  <h3>Arrival Movement</h3>

  <label>Time</label>
  <input type="time" id="timeArrival"
         oninput="updatePreview()" onchange="updatePreview()">

  <div class="count-grid">
    <div class="count-wrapper">
      <label>Crew</label>
      <input type="number" id="crewA" class="count-input"
             oninput="updatePreview()" onchange="updatePreview()">
    </div>
    <div class="count-wrapper">
      <label>Guests</label>
      <input type="number" id="guestsA" class="count-input"
             oninput="updatePreview()" onchange="updatePreview()">
    </div>
    <div class="count-wrapper">
      <label>Associates</label>
      <input type="number" id="associatesA" class="count-input"
             oninput="updatePreview()" onchange="updatePreview()">
    </div>
    <div class="count-wrapper">
      <label>Contractor / Visitor / Vendor</label>
      <input type="number" id="contractorCountA" class="count-input"
             oninput="updatePreview()" onchange="updatePreview()">
    </div>
  </div>

  <label>Vessel / Flight</label>
  <input type="text" id="vesselA" placeholder="e.g., Speed Boat Name"
         oninput="updatePreview()" onchange="updatePreview()">

  <label>From</label>
  <input type="text" id="fromA" placeholder="e.g., Male'"
         oninput="updatePreview()" onchange="updatePreview()">

  <label>Purpose</label>
  <input type="text" id="purposeA" placeholder="e.g., Guests, Associate, Visitor Arrival"
         oninput="updatePreview()" onchange="updatePreview()">

  <label>Associate & Department</label>
  <textarea id="associateDeptA" placeholder="e.g., Ahmed Zahir (F&B)"
            oninput="updatePreview()" onchange="updatePreview()"></textarea>

  <label>Contractor / Visitor / Vendor - Company & Pass No</label>
  <textarea id="contractorA" placeholder="e.g., Karthik (Gage) - Pass No 1"
            oninput="updatePreview()" onchange="updatePreview()"></textarea>

  <label>Luggage</label>
  <input type="text" id="luggageA" placeholder="e.g., Total Luggage 10"
         oninput="updatePreview()" onchange="updatePreview()">

  <label>Remarks</label>
  <textarea id="remarksA"
            placeholder="e.g., Day Shutdown Flight, Overnight Flight, Water Sample Box Sent to Male'"
            oninput="updatePreview()" onchange="updatePreview()"></textarea>
</div>

<!-- DEPARTURE MOVEMENT -->
<div class="card">
  <h3>Departure Movement</h3>

  <label>Time</label>
  <input type="time" id="timeD"
         oninput="updatePreview()" onchange="updatePreview()">

  <div class="count-grid">
    <div class="count-wrapper">
      <label>Crew</label>
      <input type="number" id="crewD" class="count-input"
             oninput="updatePreview()" onchange="updatePreview()">
    </div>
    <div class="count-wrapper">
      <label>Guests</label>
      <input type="number" id="guestsD" class="count-input"
             oninput="updatePreview()" onchange="updatePreview()">
    </div>
    <div class="count-wrapper">
      <label>Associates</label>
      <input type="number" id="associatesD" class="count-input"
             oninput="updatePreview()" onchange="updatePreview()">
    </div>
    <div class="count-wrapper">
      <label>Contractor / Visitor / Vendor</label>
      <input type="number" id="contractorCountD" class="count-input"
             oninput="updatePreview()" onchange="updatePreview()">
    </div>
  </div>

  <label>Vessel / Flight</label>
  <input type="text" id="vesselD" placeholder="e.g., Speed Boat Name"
         oninput="updatePreview()" onchange="updatePreview()">

  <label>To</label>
  <input type="text" id="toD" placeholder="e.g., Male'"
         oninput="updatePreview()" onchange="updatePreview()">

  <label>Purpose</label>
  <input type="text" id="purposeD" placeholder="e.g., Guests, Associate, Visitor Arrival"
         oninput="updatePreview()" onchange="updatePreview()">

  <label>Associate & Department</label>
  <textarea id="associateDeptD" placeholder="e.g., Ahmed Zahir (F&B)"
            oninput="updatePreview()" onchange="updatePreview()"></textarea>

  <label>Contractor / Visitor / Vendor - Company & Pass No</label>
  <textarea id="contractorD" placeholder="e.g., Karthik (Gage) - Pass No 1"
            oninput="updatePreview()" onchange="updatePreview()"></textarea>

  <label>Luggage</label>
  <input type="text" id="luggageD" placeholder="e.g., Total Luggage 10"
         oninput="updatePreview()" onchange="updatePreview()">

  <label>Remarks</label>
  <textarea id="remarksD"
            placeholder="e.g., Day Shutdown Flight, Overnight Flight, Water Sample Box Sent to Male'"
            oninput="updatePreview()" onchange="updatePreview()"></textarea>
</div>

<!-- WHATSAPP PREVIEW -->
<div class="card">
  <h3>Live WhatsApp Preview</h3>
  <div class="preview" id="preview"></div>

  <div class="whatsapp-btns">
    <button type="button" onclick="sendWhatsApp()">Send to WhatsApp</button>
    <button type="button" onclick="sendWhatsApp()">Send to WhatsApp Business</button>
  </div>
</div>

<script>
// Simple trim for compatibility
function trimString(str){
  if (!str) return "";
  return str.replace(/^\s+|\s+$/g, "");
}

function getVal(id){
  var el = document.getElementById(id);
  if (!el) return "";
  return trimString(el.value);
}

function addLine(label, value){
  value = trimString(value);
  return value ? label + ": " + value + "\n" : "";
}

function addBlock(title, value){
  value = trimString(value);
  return value ? title + ":\n" + value + "\n" : "";
}

function sectionHasData(values){
  for (var i = 0; i < values.length; i++){
    if (trimString(values[i]) !== "") return true;
  }
  return false;
}

function updatePreview(){
  var msg = "";

  // HEADER
  var dateVal    = getVal("date");
  var officerVal = getVal("officer");
  var jettyVal   = getVal("jetty");

  if (dateVal || officerVal || jettyVal){
    if (dateVal)    msg += "Date: " + dateVal + "\n";
    if (officerVal) msg += "Security Officer: " + officerVal + "\n";
    if (jettyVal)   msg += "Jetty: " + jettyVal + "\n";
  }

  // ARRIVAL VALUES
  var timeArrivalVal      = getVal("timeArrival");
  var crewAVal            = getVal("crewA");
  var guestsAVal          = getVal("guestsA");
  var associatesAVal      = getVal("associatesA");
  var contractorCountAVal = getVal("contractorCountA");
  var vesselAVal          = getVal("vesselA");
  var fromAVal            = getVal("fromA");
  var purposeAVal         = getVal("purposeA");
  var associateDeptAVal   = getVal("associateDeptA");
  var contractorAVal      = getVal("contractorA");
  var luggageAVal         = getVal("luggageA");
  var remarksAVal         = getVal("remarksA");

  var arrivalFields = [
    timeArrivalVal, crewAVal, guestsAVal, associatesAVal, contractorCountAVal,
    vesselAVal, fromAVal, purposeAVal,
    associateDeptAVal, contractorAVal, luggageAVal, remarksAVal
  ];

  if (sectionHasData(arrivalFields)){
    msg += "\n--- ARRIVAL ---\n";
    msg += addLine("Time", timeArrivalVal);
    msg += addLine("Crew", crewAVal);
    msg += addLine("Guests", guestsAVal);
    msg += addLine("Associates", associatesAVal);
    msg += addLine("Contractor / Visitor / Vendor", contractorCountAVal);
    msg += addLine("Vessel / Flight", vesselAVal);
    msg += addLine("From", fromAVal);
    msg += addLine("Purpose", purposeAVal);
    msg += addBlock("Associate & Dept", associateDeptAVal);
    msg += addBlock("Contractor Details", contractorAVal);
    msg += addLine("Luggage", luggageAVal);
    msg += addLine("Remarks", remarksAVal);
  }

  // DEPARTURE VALUES
  var timeDVal            = getVal("timeD");
  var crewDVal            = getVal("crewD");
  var guestsDVal          = getVal("guestsD");
  var associatesDVal      = getVal("associatesD");
  var contractorCountDVal = getVal("contractorCountD");
  var vesselDVal          = getVal("vesselD");
  var toDVal              = getVal("toD");
  var purposeDVal         = getVal("purposeD");
  var associateDeptDVal   = getVal("associateDeptD");
  var contractorDVal      = getVal("contractorD");
  var luggageDVal         = getVal("luggageD");
  var remarksDVal         = getVal("remarksD");

  var departureFields = [
    timeDVal, crewDVal, guestsDVal, associatesDVal, contractorCountDVal,
    vesselDVal, toDVal, purposeDVal,
    associateDeptDVal, contractorDVal, luggageDVal, remarksDVal
  ];

  if (sectionHasData(departureFields)){
    msg += "\n--- DEPARTURE ---\n";
    msg += addLine("Time", timeDVal);
    msg += addLine("Crew", crewDVal);
    msg += addLine("Guests", guestsDVal);
    msg += addLine("Associates", associatesDVal);
    msg += addLine("Contractor / Visitor / Vendor", contractorCountDVal);
    msg += addLine("Vessel / Flight", vesselDVal);
    msg += addLine("To", toDVal);
    msg += addLine("Purpose", purposeDVal);
    msg += addBlock("Associate & Dept", associateDeptDVal);
    msg += addBlock("Contractor Details", contractorDVal);
    msg += addLine("Luggage", luggageDVal);
    msg += addLine("Remarks", remarksDVal);
  }

  document.getElementById("preview").innerText = trimString(msg);
}

// Single handler for both buttons
function sendWhatsApp(){
  var previewEl = document.getElementById("preview");
  if (!previewEl) return;

  var text = trimString(previewEl.innerText);
  if (!text){
    alert("Please fill some details first. Preview is empty.");
    return;
  }

  var encoded = encodeURIComponent(text);

  // WhatsApp URL (web version works on most phones)
  var webUrl = "https://wa.me/?text=" + encoded;
  window.location.href = webUrl;
}

// Ensure preview is clean on initial load
updatePreview();
</script>

</body>
</html>